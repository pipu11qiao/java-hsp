# 复用

1. 什么是复用
2. 有啥意义
3. 怎么实现


对于c语言等面向过程的语言来说，复用通常指的就是"复制代码"。任何语言都可以通过复制来达到复用的目的。但是这样做的效果不好。Java围绕"类"来解决问题。可以直接使用别人构建或调试过的代码，而非新类，重新开始。

如何在不污染源代码的前提下使用现存代码是需要技巧的。有两种方式，组合和继承

1. 在新类中创建现有类的对象。 "组合"(Composition)
2. 创建现有类类型的新类。采用现有类形式，又无需在编码时改动其代码，这种方式叫做继承inheritance ,编译器会做大部分的工作。继承是面向对象编程的重要基础之一

组合和继承有很多相似的地方， 毕竟都是基于现有类型构建新的类型。

## 组合语法

仅需要把对象的引用（object references)放置在一个新的类里，这就使用了组合。

编译器不会为每个引用创建一个默认对象。初始化有四种方法：
1. 当对象被定义时。这意味着它们总是在调用构造函数之前初始化
2. 在该类的构造函数中
3. 在实际使用对象之前。这意味着称为延迟初始化。在对象开销大且不需要每次都创建对象的情况下，可以减少开销
4. 使用实例初始化

## 继承语法

extends 关键在来实现继承

### 初始化基类
基类和派生类

当你创建派生类的对象是，它包含了基类的子对象这个子对象与你自己创建基类的忆事一样的。只是从外部看，基类的子对象被包装在派生类的对象中。
初始化基类分为无参和有参的构造器

无参无需显式调用基类的构造器
有参需要显式调用 用到super关键字

## 委托

Java不直接支持第三种重用关系，委托

将自己累的方法委托到自身成员对象上。

## 结合组合与继承

## 保持适当的清理

在清理章节有描述， finally 中清理外部的内存使用

## 名称隐藏

## 组合与继承的选择

怎样选择

当你想在新类中包含一个已有类的功能时，使用组合，而非继承。在新类中嵌入对象，已实现其功能。新类的使用者看到的是你多定义的新类的接口，而非嵌入对象的接口

当使用继承时，使用一个现有的类并开发出他的新版本。通常这意味着使用一个通用类，并为了某个特殊需求将其特殊化。稍微思考一下，就会发现。用一个交通工具对象来组成一部车是毫无意义的，车不包含交通工具。他就是交通工具。这种"是一个"的关系是用继承来表达的，而"有一个"的关系则用组合来表达。

## protected

向对继承的类开放，对外界隐藏。使用protected

## 向上转型

继承最重要的方面不是为新类提供方法。它是新类与基类的一种关系。简而言之，这种关系可以表述为 新类是已有类的易总类型

继承图中派生类的转型为基类是向上的，所以通常称作向上转型。
向上转型是安全的。具体类到基类。

### 再论组合和继承

继承其实不太常用。尽量少的使用它

一种判断使用组合还是继承的最清晰的方法是：
问一问自己是否需要把新类向上转型为基类。如果必须向上转型那么继承就是必要的
我需要想向上转型么

final 关键字

根据上下文环境，final关键字的含义有些微的不同。通常指的是 这是不能被改变的。防止改变有两个原因： 设计或效率。

数据、方法和类

final 数据
1. 一个常量
2. 一个运行时不改变的值

### final空白符 
必须在定义时或在每个构造函数中执行final变量的赋值操作。

final参数
在参数列表中，将参数声明为final意味着在方法中不能改变参数指向的对象或基本变量

final方法

final方法， 第一个原因是给方法上锁，防止子类通过覆写的方法的行为。不会因为继承而改变
第二个原因是效率。

## final 和private

private方法都隐式的指定为final

在子类中写了一个和父类中private的方法，实际就是在子类中创建了一个新的方法。
private的方法无法触及且有效隐藏，除了把它看做是类的一部分，其他任何事物都不需要考虑它。

final 类
不能被继承


final忠告

## 类初始化和加载

类的代码在首次使用是加载

### 继承和初始化

访问main
加载基类
根基类的static初始化进行，接着是派生类

类加载完，开始初始化，从跟类开始


